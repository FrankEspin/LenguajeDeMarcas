<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aplicación del Tiempo - Localidad</title>
  <link rel="stylesheet" href="estilo.css">
</head>
<body>

  <header>
    <h1 id="localidad">Aranjuez</h1>
    <img id="escudo" src="escudo_aranjuez.jpg" alt="Escudo de la localidad">
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="api_tiempo_aranjuez.html">Api</a></li>
                <li><a href="paginaprincipal.html">Informacion Aranjuez</a></li>
                <li><a href="informacionMetereologica.html">Información meteorológica Aranjuez</a></li>
                <li><a href="informacionAranjuez.html">Informacion de Aranjuez adicional</a></li>
            </ul>
    </nav>
  </header>
</head>
<body>

<div class="container mt-5">
  <form id="dataSelectionForm">
      <div class="form-group">
          <label for="indexSelect">Selecciona un índice:</label>
          <select class="form-control" id="indexSelect">
          </select>
      </div>
  </form>
  <table id="weather-table" class="table">
      <thead>
          <tr>
              <th>Ciudad</th>
              <th>Provincia</th>
              <th>Descripción del Clima</th>
              <th>Temperatura Máxima (°C)</th>
              <th>Temperatura Mínima (°C)</th>
          </tr>
      </thead>
      <tbody id="weather-data">
      </tbody>
  </table>
</div>
<script>
  window.onload = function() {
      fetch('https://www.el-tiempo.net/api/json/v2/provincias/28/municipios/28079')
          .then(response => response.json())
          .then(data => {
              const city = data.municipio;  // Cambié "cities" a "city" ya que parece que es un solo municipio
              const citySelect = document.getElementById('indexSelect');
              
              // Añadir la opción de ciudad
              const option = document.createElement('option');
              option.value = city.NOMBRE;
              option.text = city.NOMBRE;
              citySelect.appendChild(option);
              
              // Cambiar el evento de selección
              citySelect.addEventListener('change', function() {
                  if (this.value === city.NOMBRE) {
                      const weatherTable = document.getElementById('weather-table');
                      weatherTable.innerHTML = `
                          <thead>
                              <tr>
                                  <th>Ciudad</th>
                                  <th>Provincia</th>
                                  <th>Descripción del Clima</th>
                                  <th>Temperatura Actual (°C)</th>
                                  <th>Temperatura Máxima (°C)</th>
                                  <th>Temperatura Mínima (°C)</th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr>
                                  <td>${city.NOMBRE}</td>
                                  <td>${city.NOMBRE_PROVINCIA}</td>
                                  <td>${data.stateSky.description}</td>
                                  <td>${data.temperatura_actual}°C</td>
                                  <td>${data.temperaturas.max}°C</td>
                                  <td>${data.temperaturas.min}°C</td>
                              </tr>
                          </tbody>
                      `;
                  }
              });
              
              // Disparar el evento de cambio para cargar los datos iniciales
              citySelect.dispatchEvent(new Event('change'));
          })
          .catch(error => console.error('Error:', error));
  };
</script>




</body>
</html></footer>
