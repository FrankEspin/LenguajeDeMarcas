<script>
document.addEventListener('DOMContentLoaded', () => {
    const comunidadSelect = document.getElementById('comunidad');
    const localidadSelect = document.getElementById('localidad-select');
    const buscarButton = document.getElementById('buscar');
    const weatherTable = document.getElementById('weather-table');

    // Función para obtener los datos del clima
    const obtenerClima = async (comunidad, localidad) => {
        try {
            const respuesta = await fetch(`https://www.el-tiempo.net/api/json/municipio/${comunidad}/${localidad}`);
            const datos = await respuesta.json();
            console.log(datos);

            // Mostrar la información en la tabla
            weatherTable.innerHTML = `
                <thead>
                    <tr>
                        <th>Ciudad</th>
                        <th>Provincia</th>
                        <th>Descripción del Clima</th>
                        <th>Temperatura Máxima (°C)</th>
                        <th>Temperatura Mínima (°C)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>${datos.nombre}</td>
                        <td>${datos.provincia}</td>
                        <td>${datos.estadoCielo.descripcion}</td>
                        <td>${datos.temperaturas.maxima}</td>
                        <td>${datos.temperaturas.minima}</td>
                    </tr>
                </tbody>
            `;

            // También podemos mostrar otros datos como la temperatura actual, viento, etc.
            document.getElementById("fecha").innerHTML = datos.fecha;
            document.getElementById("temperatura_actual").innerHTML = datos.temperatura_actual;
            document.getElementById("viento").innerHTML = datos.viento;

        } catch (error) {
            console.error('Error al obtener los datos del clima:', error);
        }
    };

    // Evento del botón de buscar
    buscarButton.addEventListener('click', () => {
        const comunidad = comunidadSelect.value;
        const localidad = localidadSelect.value;
        obtenerClima(comunidad, localidad);
    });
});
